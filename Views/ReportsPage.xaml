<Page
    x:Class="RestaurantJapanese.Views.ReportsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:models="using:RestaurantJapanese.Models">

    <Grid Background="{StaticResource JpGradientBg}" Padding="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Título Principal de la Página -->
        <StackPanel Grid.Row="0" Spacing="12" Margin="0,0,0,16" HorizontalAlignment="Center">
            <StackPanel Orientation="Horizontal" Spacing="12" HorizontalAlignment="Center">
                <!-- Quité los emojis, solo dejo el título -->
                <TextBlock Text="Reportes de Ventas" Style="{StaticResource JpPageTitle}"/>
            </StackPanel>
            <Rectangle Style="{StaticResource JpSeparator}" Width="200" HorizontalAlignment="Center"/>
            <TextBlock Text="Analiza las Ventas con Detalle y Precision"
                       Style="{StaticResource JpPageSubtitle}" TextAlignment="Center"/>
        </StackPanel>

        <!-- Filtros -->
        <Border Grid.Row="1" 
                Background="{StaticResource JpSurfaceBrush}"
                CornerRadius="{StaticResource JpRadiusL}"
                Padding="20"
                Margin="0,0,0,16"
                BorderBrush="{StaticResource JpLineBrush}"
                BorderThickness="1">
            <StackPanel Orientation="Horizontal" Spacing="12" HorizontalAlignment="Center">
                <TextBlock Text="Desde:" VerticalAlignment="Center" FontWeight="SemiBold"/>
                <DatePicker Width="220" Date="{Binding FromDateOffset, Mode=TwoWay}"/>

                <TextBlock Text="Hasta:" Margin="12,0,0,0" VerticalAlignment="Center" FontWeight="SemiBold"/>
                <DatePicker Width="220" Date="{Binding ToDateOffset, Mode=TwoWay}"/>

                <!-- Botones más anchos y redondeados -->
                <Button Content="Cargar"
                        Margin="12,0,0,0"
                        Command="{Binding LoadCommand}"
                        Style="{StaticResource JpPrimaryButton}"
                        Height="40"
                        Padding="16,6"
                        Width="120"
                        CornerRadius="20"/>

                <Button Content="Hoy"
                        Margin="8,0,0,0"
                        Command="{Binding QuickTodayCommand}"
                        Style="{StaticResource JpSecondaryButton}"
                        Height="40"
                        Padding="16,6"
                        Width="120"
                        CornerRadius="20"/>

                <Button Content="Todos"
                        Margin="8,0,0,0"
                        Command="{Binding QuickAllCommand}"
                        Style="{StaticResource JpAccentButton}"
                        Height="40"
                        Padding="16,6"
                        Width="120"
                        ToolTipService.ToolTip="Mostrar todos los registros"
                        CornerRadius="20"/>
            </StackPanel>
        </Border>

        <!-- Encabezado de columnas -->
        <Border Grid.Row="2" 
                Background="{StaticResource JpSurfaceBrush}"
                CornerRadius="{StaticResource JpRadiusM}"
                Padding="16,12"
                Margin="0,0,0,8"
                BorderBrush="{StaticResource JpGoldBrush}"
                BorderThickness="2">
            <Grid ColumnSpacing="12">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="100"/>
                    <ColumnDefinition Width="200"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Text="ID Ticket" FontWeight="Bold" Foreground="{StaticResource JpTextBrush}"/>
                <TextBlock Grid.Column="1" Text="Fecha/Hora" FontWeight="Bold" Foreground="{StaticResource JpTextBrush}"/>
                <TextBlock Grid.Column="2" Text="Subtotal" FontWeight="Bold" Foreground="{StaticResource JpTextBrush}"/>
                <TextBlock Grid.Column="3" Text="Impuesto" FontWeight="Bold" Foreground="{StaticResource JpTextBrush}"/>
                <TextBlock Grid.Column="4" Text="Total" FontWeight="Bold" Foreground="{StaticResource JpTextBrush}"/>
            </Grid>
        </Border>

        <!-- Lista -->
        <ScrollViewer Grid.Row="4" VerticalScrollBarVisibility="Auto">
            <ListView ItemsSource="{Binding Items}" 
                      Background="Transparent"
                      BorderThickness="0">
                <ListView.ItemTemplate>
                    <DataTemplate x:DataType="models:SalesReportRowModel">
                        <Border Background="{StaticResource JpSurfaceBrush}"
                                CornerRadius="{StaticResource JpRadiusS}"
                                Padding="16,12"
                                Margin="0,2"
                                BorderBrush="{StaticResource JpLineBrush}"
                                BorderThickness="1">
                            <Grid ColumnSpacing="12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100"/>
                                    <ColumnDefinition Width="200"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Column="0" Text="{x:Bind IdTicket}" Foreground="{StaticResource JpTextBrush}"/>
                                <TextBlock Grid.Column="1" Text="{x:Bind FormattedDate}" Foreground="{StaticResource JpTextBrush}"/>
                                <TextBlock Grid.Column="2" Text="{x:Bind Subtotal}" Foreground="{StaticResource JpTextBrush}"/>
                                <TextBlock Grid.Column="3" Text="{x:Bind Tax}" Foreground="{StaticResource JpTextBrush}"/>
                                <TextBlock Grid.Column="4" Text="{x:Bind Total}" FontWeight="SemiBold" Foreground="{StaticResource JpCrimsonBrush}"/>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </ScrollViewer>

        <!-- Totales -->
        <Border Grid.Row="5" 
                Background="{StaticResource JpCardGradient}"
                CornerRadius="{StaticResource JpRadiusL}"
                Padding="20,16"
                Margin="0,16,0,0"
                BorderBrush="{StaticResource JpGoldBrush}"
                BorderThickness="2">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Spacing="24">
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <TextBlock Text="Tickets:" FontWeight="SemiBold" Foreground="{StaticResource JpTextBrush}"/>
                    <TextBlock Text="{Binding TotalTickets}" FontWeight="Bold" Foreground="{StaticResource JpCrimsonBrush}"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <TextBlock Text="Subtotal:" FontWeight="SemiBold" Foreground="{StaticResource JpTextBrush}"/>
                    <TextBlock Text="{Binding SumSubtotal}" FontWeight="Bold" Foreground="{StaticResource JpTextBrush}"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <TextBlock Text="Impuesto:" FontWeight="SemiBold" Foreground="{StaticResource JpTextBrush}"/>
                    <TextBlock Text="{Binding SumTax}" FontWeight="Bold" Foreground="{StaticResource JpTextBrush}"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <TextBlock Text="TOTAL:" FontWeight="Bold" FontSize="16" Foreground="{StaticResource JpTextBrush}"/>
                    <TextBlock Text="{Binding SumTotal}" FontWeight="Bold" FontSize="16" Foreground="{StaticResource JpCrimsonBrush}"/>
                </StackPanel>
            </StackPanel>
        </Border>
    </Grid>
</Page>
